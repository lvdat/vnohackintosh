<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-opencore-config/kernel">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Kernel | VNOHackintosh</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://vnohackintosh.com/docs/opencore-config/kernel"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Kernel | VNOHackintosh"><meta data-rh="true" name="description" content="Phần này liên quan đến Kernel, nhưng bạn chỉ cần quan tâm phần Add và Quirks mà thôi."><meta data-rh="true" property="og:description" content="Phần này liên quan đến Kernel, nhưng bạn chỉ cần quan tâm phần Add và Quirks mà thôi."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://vnohackintosh.com/docs/opencore-config/kernel"><link data-rh="true" rel="alternate" href="https://vnohackintosh.com/docs/opencore-config/kernel" hreflang="en"><link data-rh="true" rel="alternate" href="https://vnohackintosh.com/docs/opencore-config/kernel" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="VNOHackintosh RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="VNOHackintosh Atom Feed"><link rel="stylesheet" href="/assets/css/styles.b6d6bd8d.css">
<link rel="preload" href="/assets/js/runtime~main.73a6097f.js" as="script">
<link rel="preload" href="/assets/js/main.5c242059.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ Nếu bạn không có thời gian tìm hiểu hackintosh, vui lòng tham khảo <strong><a href="/services">dịch vụ</a></strong> của chúng tôi</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">VNOHackintosh</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/introduction">Guides</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/resources">Downloads</a><a class="navbar__item navbar__link" href="/services">Dịch vụ</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/vanhung4499/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/introduction">Bắt đầu</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/basic-knowledge/prerequisites">Kiến thức cơ bản</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/usb-creation/download-files">Tạo USB cài macOS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/opencore-config/intro">OpenCore Config</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/opencore-config/intro">Tổng quan</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/opencore-config/acpi">ACPI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/opencore-config/booter">Booter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/opencore-config/device-properties">Device Properties</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/opencore-config/kernel">Kernel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/opencore-config/misc">Misc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/opencore-config/nvram">NVRAM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/opencore-config/platform-info">PlatformInfo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/opencore-config/uefi">UEFI</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/installation/partition">Cài đặt</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/post-install/must-do-after-install">Sau cài đặt</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/acpi-patching/overview">Patch ACPI</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">OpenCore Config</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Kernel</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Kernel</h1></header><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Phần này liên quan đến Kernel, nhưng bạn chỉ cần quan tâm phần Add và Quirks mà thôi.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-kext">Add Kext<a class="hash-link" href="#add-kext" title="Direct link to heading">​</a></h2><p>Kext theo cấu hình đã tải được chuẩn bị trước, cần được thêm vào config thì OpenCore mới load chúng, nếu không có trong danh sách hoặc bị vô hiệu thì kext đó sẽ không được load.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">OCC</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">OCAT</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><img loading="lazy" src="/img/docs/opencore-config/occ-kn-add.png" class="img_ev3q"></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><img loading="lazy" src="/img/docs/opencore-config/ocat-kn-add.png" class="img_ev3q"></div></div></div><ol><li><p>Một bộ kext cơ bản sẽ bắt buộc có:</p><table><thead><tr><th align="left">Kext</th><th align="left">Type</th></tr></thead><tbody><tr><td align="left">Lilu</td><td align="left">System</td></tr><tr><td align="left">VirtualSMC</td><td align="left">System</td></tr><tr><td align="left">WhateverGreen</td><td align="left">Graphic</td></tr><tr><td align="left">AppleALC</td><td align="left">Audio</td></tr></tbody></table></li><li><p>Thêm kext LAN: (mainboad nhiều loại LAN thì thêm kext tương ứng)</p></li></ol><ul><li>RealtekRTL8111</li><li>RealtekRTL8100</li><li>IntelMausi</li><li>LucyRTL8125Ethernet.kext</li></ul><ol start="3"><li>Thêm kext USB: </li></ol><ul><li>USBInjectAll (chưa map usb)</li><li>XHCI-unsupported (cho X79/X99, 400/500/600 series)</li><li>USBToolBox + UBTMap (đã map usb trong Windows)</li></ul><ol start="4"><li><p>Thêm kext NVMEFix nếu dùng SSD NVME</p></li><li><p>Thêm VoodooPS2Controller để dùng bàn phím cho laptop</p></li></ol><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>Thứ tự kext sẽ được load y như danh sách từ trên xuống, vậy nên bạn nên điều chỉnh lại theo như thứ tự tôi đã trình bày.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="quirks">Quirks<a class="hash-link" href="#quirks" title="Direct link to heading">​</a></h2><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Quirks trong các phiên bản OC khác nhau có thể sẽ khác nhau. Khi viết bài viế này tôi đang dùng bản 0.8.4, nhưng bạn chỉ cần tập trung vào một vài quirk quan trọng thôi không phải cần tất cả.</p></div></div><p>Giải thích sơ qua về chức năng của các quirk:</p><ul><li><strong>AppleCpuPmCfgLock</strong><ul><li>Chỉ cần khi không tắt được CFG-Lock trong BIOS</li><li>Chỉ áp dụng cho Ivy Bridge hoặc cũ hơn</li></ul></li><li><strong>AppleXcpmCfgLock</strong><ul><li>Chỉ cần khi không tắt được CFG-Lock trong BIOS</li><li>Chỉ áp dụng cho Haswell hoặc mới hơn</li></ul></li><li>AppleXcpmExtraMsrs<ul><li>Vô hiệu hóa quyền truy cập MSR quan trọng đối với một số CPU không có hỗ trợ XCPM như là Pentium và một số nhiều Xeon</li><li>Chủ yếu được sử dụng trên các CPU không có quản lý nguồn gốc</li><li>Nên bật cho <code>Broadwell-E</code> trở về trước, chỉ trên HEDT</li></ul></li><li>AppleXcpmForceBoost<ul><li>Buộc hiệu suất tối đa ở chế độ XCPM</li><li>Ép xung CPU cao được khuyến nghị sử dụng trên các CPU cao cấp, hoạt động liên tục được trong thời gian dài</li><li>Một số CPU Xeon sẽ được hưởng lợi khi bật quirk này</li></ul></li><li><strong>CustomSMBIOSGuid</strong><ul><li>Đi kèm với <code>UpdatesBiosMode = Custom</code> để vá lỗi GUID</li><li>Laptop hoặc PC đồng bộ của Dell thường phải bật quirk này</li><li>Nếu About This Mac không thể hiển thị số sê-ri một cách bình thường, bạn cũng có thể dùng nó</li></ul></li><li><strong>DisableIoMapper</strong></li><li>Tắt hỗ trợ IOMapper trong XNU (VT-d)</li><li>Nếu BIOS tắt được VT-d，không cần phải bật nó</li><li><strong>DisableLinkeditJettison</strong></li><li>Quirk này cho phép Lilu và các kext khác chạy ở mức hiệu suất tối ưu mà không cần boot arugment <code>keepsyms=1</code></li><li><strong>DisableRtcChecksum</strong><ul><li>Ngăn AppleRTC ghi vào vùng thanh ghi checksum (0x58-0x59)</li><li>Dùng cho các máy báo lỗi RTC sau khi shutdown/restart từ macOS</li><li>Thường chỉ gặp lỗi này trên các laptop và PC của HP</li></ul></li><li>ExtendBTFeatureFlags<ul><li>Đặt FeatureFlags thành 0x0F để có đầy đủ chức năng bluetooth</li><li>Hữu dụng cho các card wifi không phải là của Apple/Fenvi (thực chất Fenvi chỉ là cái tên trên mặt chứ chip bên trong cũng như của Apple) khi gặp các lỗi tới tính năng continuity</li></ul></li><li>ForceSecureBootScheme<ul><li>Tùy chọn này là bắt buộc trên các máy ảo khi sử dụng SecureBootModel khác x86legacy</li></ul></li><li>IncreasePciBarSize<ul><li>Tăng kích thước Pci Bar 32-bit trong IOPCIFamily từ 1GB lên 4GB</li><li>Tùy chọn này là bắt buộc để chỉ ra rằng phần sụn bị định cấu hình sai hoặc bị lỗi, vì vậy nó thường không được sử dụng</li></ul></li><li><strong>LapicKernelPanic</strong><ul><li>Ngăn chặn Kernel Panic do ngắt AP core lapic gây ra</li><li>Lỗi này thường gặp trên laptop HP, nếu không có lỗi thì không nên bật</li></ul></li><li>LegacyCommpage<ul><li>Thay thế triển khai bcopy commpage 64-bit mặc định bằng một triển khai không yêu cầu SSE3</li><li>Điều này hoạt động tuyệt vời cho các nền tảng cũ kế thừa 10.4-10.6</li><li>macOS mới về cơ bản không cần</li></ul></li><li><strong>PanicNoKextDump</strong><ul><li>Cho phép đọc log KP khi KP xảy ra, nên bật</li></ul></li><li><strong>PowerTimeoutKernelPanic</strong><ul><li>Khắc phục Kernel Panic trong macOS Catalina do hết thời gian chờ thay đổi trạng thái nguồn của thiết bị</li><li>Bật nó khi bạn không thể wake sau khi sleep</li><li>PC thường không cần bật quirk này</li></ul></li><li>ProvideCurrentCpuInfo<ul><li>Cung cấp thông tin CPU, Intel gen 12 và AMD thường dùng</li></ul></li><li>SetApfsTrimTimeout<ul><li>Các phiên bản trước 10.14 không cần</li><li>Chủ yếu dành cho SSD SATA, đặt các độ trễ khác nhau theo các bản mac khác nhau</li></ul></li><li>ThirdPartyDrives<ul><li>Bật TRIM cho SSD, có thể cải thiện chế độ ngủ đông</li><li>SSD NVMe được macOS tự động bật trim nên không cần</li><li>SATA SSD có thể bật bằng lệnh <code>sudo trimforce enable</code>, hiệu quả là như nhau</li></ul></li><li><strong>XhciPortLimit</strong><ul><li>Loại bỏ giới hạn 15 cổng, sau khi map usb thì không cần nó nữa</li><li>Từ bản BigSur 11.3 không được bật quirk này nếu không sẽ không nhận cổng usb nào cả!</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="intel-desktop">Intel Desktop<a class="hash-link" href="#intel-desktop" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sandy-bridge-ivy-bridge">Sandy Bridge, Ivy Bridge<a class="hash-link" href="#sandy-bridge-ivy-bridge" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="/assets/images/xc-kn-q-dt-3-99e3b4d95481e87931e04145d91844b9.png" width="1732" height="1466" class="img_ev3q"></p><table><thead><tr><th align="left">Quirk</th><th align="left">Enabled</th><th align="left">Comment</th></tr></thead><tbody><tr><td align="left">AppleCpuPmCfgLock</td><td align="left">YES</td><td align="left">Không cần nếu có thể disable <code>CFG-Lock</code> trong BIOS</td></tr><tr><td align="left">CustomSMBIOSGuid</td><td align="left">NO</td><td align="left">Dell/Vaio cần quirk này</td></tr><tr><td align="left">DisableIoMapper</td><td align="left">YES</td><td align="left">Không cần nếu có thể disable <code>VT-D</code> trong BIOS</td></tr><tr><td align="left">DisableLinkeditJettison</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">LapicKernelPanic</td><td align="left">NO</td><td align="left">Máy HP sẽ cần quirk này</td></tr><tr><td align="left">PanicNoKextDump</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">PowerTimeoutKernelPanic</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">XhciPortLimit</td><td align="left">YES</td><td align="left">Bỏ quirk này nếu kể từ macOS 11.3 trở về sau</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="haswell-broadwell-skylake-kaby-lake-coffee-lake-comet-lake-tiger-lake">Haswell, Broadwell, Skylake, Kaby Lake, Coffee Lake, Comet Lake, Tiger Lake<a class="hash-link" href="#haswell-broadwell-skylake-kaby-lake-coffee-lake-comet-lake-tiger-lake" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="/assets/images/xc-kn-q-dt-4-5e8a035e896caf2a6d7cd86811bfd8ad.png" width="1530" height="750" class="img_ev3q"></p><table><thead><tr><th align="left">Quirk</th><th align="left">Enabled</th><th align="left">Comment</th></tr></thead><tbody><tr><td align="left">AppleCpuPmCfgLock</td><td align="left">NO</td><td align="left">Need if running 10.10 or older and cannot disable <code>CFG-Lock</code> in the BIOS</td></tr><tr><td align="left">AppleXcpmCfgLock</td><td align="left">YES</td><td align="left">Không cần nếu có thể disable <code>CFG-Lock</code> trong BIOS</td></tr><tr><td align="left">CustomSMBIOSGuid</td><td align="left">NO</td><td align="left">Dell/Vaio cần quirk này</td></tr><tr><td align="left">DisableIoMapper</td><td align="left">YES</td><td align="left">Không cần nếu có thể disable <code>VT-D</code> trong BIOS</td></tr><tr><td align="left">DisableLinkeditJettison</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">LapicKernelPanic</td><td align="left">NO</td><td align="left">Máy HP sẽ cần quirk này</td></tr><tr><td align="left">PanicNoKextDump</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">PowerTimeoutKernelPanic</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">XhciPortLimit</td><td align="left">YES</td><td align="left">Bỏ quirk này nếu kể từ macOS 11.3 trở về sau</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="intel-hedt">Intel HEDT<a class="hash-link" href="#intel-hedt" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sandy-bridge-e-ivy-bridge-e-haswell-e-broadwell-e">Sandy Bridge-E, Ivy Bridge-E, Haswell-E, Broadwell-E<a class="hash-link" href="#sandy-bridge-e-ivy-bridge-e-haswell-e-broadwell-e" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="/assets/images/xc-kn-q-hedt-5-390f00ba66e2273975a2913691e61057.png" width="1540" height="710" class="img_ev3q"></p><table><thead><tr><th align="left">Quirk</th><th align="left">Enabled</th><th align="left">Comment</th></tr></thead><tbody><tr><td align="left">AppleCpuPmCfgLock</td><td align="left">NO</td><td align="left">Need if running 10.10 or older and cannot disable <code>CFG-Lock</code> in the BIOS</td></tr><tr><td align="left">AppleXcpmCfgLock</td><td align="left">YES</td><td align="left">Không cần nếu có thể disable <code>CFG-Lock</code> trong BIOS</td></tr><tr><td align="left">AppleXcpmExtraMsrs</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">CustomSMBIOSGuid</td><td align="left">NO</td><td align="left">Dell/Vaio cần quirk này</td></tr><tr><td align="left">DisableIoMapper</td><td align="left">YES</td><td align="left">Không cần nếu có thể disable <code>VT-D</code> trong BIOS</td></tr><tr><td align="left">DisableLinkeditJettison</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">LapicKernelPanic</td><td align="left">NO</td><td align="left">Máy HP sẽ cần quirk này</td></tr><tr><td align="left">PanicNoKextDump</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">PowerTimeoutKernelPanic</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">XhciPortLimit</td><td align="left">YES</td><td align="left">Bỏ quirk này kể từ macOS 11.3 trở về sau</td></tr></tbody></table><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Dành cho Haswell-E và Broadwell-E, cần phải fake thông tin CPU trong phần Emulate:</p><ul><li><strong>Haswell E</strong>:<ul><li>Cpuid1Data: <strong><code>C3060300 00000000 00000000 00000000</code></strong></li><li>Cpuid1Mask: <strong><code>FFFFFFFF 00000000 00000000 00000000</code></strong></li></ul></li><li><strong>Broadwell E</strong>:<ul><li>Cpuid1Data: <strong><code>D4060300 00000000 00000000 00000000</code></strong></li><li>Cpuid1Mask: <strong><code>FFFFFFFF 00000000 00000000 00000000</code></strong></li></ul></li></ul></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="skylake-xw-cascade-lake-xw">Skylake-X/W, Cascade Lake-X/W<a class="hash-link" href="#skylake-xw-cascade-lake-xw" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="/assets/images/xc-kn-q-hedt-6-ab1831884fcab710c762368127898fd7.png" width="1458" height="712" class="img_ev3q"></p><table><thead><tr><th align="left">Quirk</th><th align="left">Enabled</th><th align="left">Comment</th></tr></thead><tbody><tr><td align="left">AppleXcpmCfgLock</td><td align="left">YES</td><td align="left">Không cần nếu có thể disable <code>CFG-Lock</code> trong BIOS</td></tr><tr><td align="left">CustomSMBIOSGuid</td><td align="left">NO</td><td align="left">Dell/Vaio cần quirk này</td></tr><tr><td align="left">DisableIoMapper</td><td align="left">YES</td><td align="left">Không cần nếu có thể disable <code>VT-D</code> trong BIOS</td></tr><tr><td align="left">DisableLinkeditJettison</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">LapicKernelPanic</td><td align="left">NO</td><td align="left">HP Machines will require this quirk</td></tr><tr><td align="left">PanicNoKextDump</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">PowerTimeoutKernelPanic</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">XhciPortLimit</td><td align="left">YES</td><td align="left">Bỏ quirk này kể từ macOS 11.3 trở về sau</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="intel-laptop">Intel Laptop<a class="hash-link" href="#intel-laptop" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sandy-bridge-ivy-bridge-1">Sandy Bridge, Ivy Bridge<a class="hash-link" href="#sandy-bridge-ivy-bridge-1" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="/assets/images/xc-kn-q-lt-3-99e3b4d95481e87931e04145d91844b9.png" width="1732" height="1466" class="img_ev3q"></p><table><thead><tr><th align="left">Quirk</th><th align="left">Enabled</th><th align="left">Comment</th></tr></thead><tbody><tr><td align="left">AppleCpuPmCfgLock</td><td align="left">YES</td><td align="left">Không cần nếu có thể disable <code>CFG-Lock</code> trong BIOS</td></tr><tr><td align="left">CustomSMBIOSGuid</td><td align="left">NO</td><td align="left">Dell/Vaio cần quirk này</td></tr><tr><td align="left">DisableIoMapper</td><td align="left">YES</td><td align="left">Không cần nếu có thể disable <code>VT-D</code> trong BIOS</td></tr><tr><td align="left">DisableLinkeditJettison</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">LapicKernelPanic</td><td align="left">NO</td><td align="left">HP Machines will require this quirk</td></tr><tr><td align="left">PanicNoKextDump</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">PowerTimeoutKernelPanic</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">XhciPortLimit</td><td align="left">YES</td><td align="left">Bỏ quirk này kể từ macOS 11.3 trở về sau</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="haswell-broadwell-skylake-kaby-lake-coffee-lake-whiskey-lake-coffee-lake-plus-comet-lake-icelake">Haswell, Broadwell, Skylake, Kaby Lake, Coffee Lake, Whiskey Lake, Coffee Lake Plus, Comet Lake, Icelake<a class="hash-link" href="#haswell-broadwell-skylake-kaby-lake-coffee-lake-whiskey-lake-coffee-lake-plus-comet-lake-icelake" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="/assets/images/xc-kn-q-lt-4-6b5f8b0d479b529c2314f3399f4127b8.png" width="1436" height="714" class="img_ev3q"></p><table><thead><tr><th align="left">Quirk</th><th align="left">Enabled</th><th align="left">Comment</th></tr></thead><tbody><tr><td align="left">AppleCpuPmCfgLock</td><td align="left">NO</td><td align="left">Need if running 10.10 or older and cannot disable <code>CFG-Lock</code> in the BIOS</td></tr><tr><td align="left">AppleXcpmCfgLock</td><td align="left">YES</td><td align="left">Không cần nếu có thể disable <code>CFG-Lock</code> trong BIOS</td></tr><tr><td align="left">CustomSMBIOSGuid</td><td align="left">NO</td><td align="left">Dell/Vaio cần quirk này</td></tr><tr><td align="left">DisableIoMapper</td><td align="left">YES</td><td align="left">Không cần nếu có thể disable <code>VT-D</code> trong BIOS</td></tr><tr><td align="left">DisableLinkeditJettison</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">LapicKernelPanic</td><td align="left">NO</td><td align="left">Máy HP sẽ cần quirk này</td></tr><tr><td align="left">PanicNoKextDump</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">PowerTimeoutKernelPanic</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">XhciPortLimit</td><td align="left">YES</td><td align="left">Bỏ quirk này kể từ macOS 11.3 trở về sau</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="amd-desktop">AMD Desktop<a class="hash-link" href="#amd-desktop" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="quirks-1">Quirks<a class="hash-link" href="#quirks-1" title="Direct link to heading">​</a></h3><table><thead><tr><th align="left">Quirk</th><th align="left">Enabled</th><th align="left">Comment</th></tr></thead><tbody><tr><td align="left">DisableLinkeditJettison</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">PanicNoKextDump</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">PowerTimeoutKernelPanic</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">ProvideCurrentCpuInfo</td><td align="left">YES</td><td align="left"></td></tr><tr><td align="left">XhciPortLimit</td><td align="left">YES</td><td align="left">Bỏ quirk này kể từ macOS 11.3 trở về sau</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="emulate">Emulate<a class="hash-link" href="#emulate" title="Direct link to heading">​</a></h3><p>Cần bật thêm <strong>DummyPowerManagement</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="patch">Patch<a class="hash-link" href="#patch" title="Direct link to heading">​</a></h3><p>Đối với AMD CPU thì còn phải thêm khá nhiều Patch Kernel: <a href="https://github.com/AMD-OSX/AMD_Vanilla/blob/master/patches.plist" target="_blank" rel="noopener noreferrer">AMD_Vanilla</a></p><p>Bạn có thể dùng <a href="https://github.com/corpnewt/ProperTree" target="_blank" rel="noopener noreferrer"><strong>Propertree</strong></a> để thay thế phần <code>Kernel &gt; Patch</code> trong config bằng phần patch được cung cấp trong link trên.</p><p><img loading="lazy" src="/assets/images/occ-kn-p-amd-5d9579d6ec79908d4efd7c200601558f.png" width="2686" height="1352" class="img_ev3q"></p><p>Core Count patch cần phải được sửa dựa theo CPU của bạn. Tìm ba dòng <code>algrey - Force cpuid_cores_per_package</code> và sửa giá trị <code>Replace</code> (như ảnh). Ba dòng trên tương ứng với các bản macOS từ 10.13 tới 12 và các bản mới hơn sẽ thêm các dòng khác.</p><p>Sửa <code>B8000000 0000</code>/<code>BA000000 0000</code>/<code>BA000000 0090</code> to <code>B8 &lt;CoreCount&gt; 0000 0000</code>/<code>BA &lt;CoreCount&gt; 0000 0000</code>/<code>BA &lt;CoreCount&gt; 0000 0090</code> với <code>&lt;CoreCount&gt;</code> là số nhân trong CPU của bạn trong hệ 16.</p><table><thead><tr><th>CoreCount</th><th>Hexadecimal</th></tr></thead><tbody><tr><td>4 Core</td><td><code>04</code></td></tr><tr><td>6 Core</td><td><code>06</code></td></tr><tr><td>8 Core</td><td><code>08</code></td></tr><tr><td>12 Core</td><td><code>0C</code></td></tr><tr><td>16 Core</td><td><code>10</code></td></tr><tr><td>24 Core</td><td><code>18</code></td></tr><tr><td>32 Core</td><td><code>20</code></td></tr></tbody></table><p>Ví dụ với Ryzen 5 5600X có 6 Core thì giá trị điền vào Replace là <code>B8 06 0000 0000</code>/<code>BA 06 0000 0000</code>/<code>BA 06 0000 0090</code></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/opencore-config/kernel.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/opencore-config/device-properties"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Device Properties</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/opencore-config/misc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Misc</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#add-kext" class="table-of-contents__link toc-highlight">Add Kext</a></li><li><a href="#quirks" class="table-of-contents__link toc-highlight">Quirks</a></li><li><a href="#intel-desktop" class="table-of-contents__link toc-highlight">Intel Desktop</a><ul><li><a href="#sandy-bridge-ivy-bridge" class="table-of-contents__link toc-highlight">Sandy Bridge, Ivy Bridge</a></li><li><a href="#haswell-broadwell-skylake-kaby-lake-coffee-lake-comet-lake-tiger-lake" class="table-of-contents__link toc-highlight">Haswell, Broadwell, Skylake, Kaby Lake, Coffee Lake, Comet Lake, Tiger Lake</a></li></ul></li><li><a href="#intel-hedt" class="table-of-contents__link toc-highlight">Intel HEDT</a><ul><li><a href="#sandy-bridge-e-ivy-bridge-e-haswell-e-broadwell-e" class="table-of-contents__link toc-highlight">Sandy Bridge-E, Ivy Bridge-E, Haswell-E, Broadwell-E</a></li><li><a href="#skylake-xw-cascade-lake-xw" class="table-of-contents__link toc-highlight">Skylake-X/W, Cascade Lake-X/W</a></li></ul></li><li><a href="#intel-laptop" class="table-of-contents__link toc-highlight">Intel Laptop</a><ul><li><a href="#sandy-bridge-ivy-bridge-1" class="table-of-contents__link toc-highlight">Sandy Bridge, Ivy Bridge</a></li><li><a href="#haswell-broadwell-skylake-kaby-lake-coffee-lake-whiskey-lake-coffee-lake-plus-comet-lake-icelake" class="table-of-contents__link toc-highlight">Haswell, Broadwell, Skylake, Kaby Lake, Coffee Lake, Whiskey Lake, Coffee Lake Plus, Comet Lake, Icelake</a></li></ul></li><li><a href="#amd-desktop" class="table-of-contents__link toc-highlight">AMD Desktop</a><ul><li><a href="#quirks-1" class="table-of-contents__link toc-highlight">Quirks</a></li><li><a href="#emulate" class="table-of-contents__link toc-highlight">Emulate</a></li><li><a href="#patch" class="table-of-contents__link toc-highlight">Patch</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction">Guide</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.facebook.com/groups/vnohackintosh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/vnohackintosh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook Page<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/vanhung4499" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 VNOHackintosh, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.73a6097f.js"></script>
<script src="/assets/js/main.5c242059.js"></script>
</body>
</html>